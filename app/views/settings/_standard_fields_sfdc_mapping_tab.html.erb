<div id="filter_toggle" style="padding-top:0.5em">
  <label class="filter-switch">
    <input type="checkbox" onclick="javascript:handle_SF_Custom_Fields_Only_filter_toggle_click(this);" <% if params[:sf_custom_fields_only] == "true" %> checked <% end %>
    />
    <div class="filter-slider round"></div>
    <span style="font-weight:normal;position:absolute;top:3px;left:48px;width:256px">Only list custom Salesforce fields <% if params[:sf_custom_fields_only] == "true" %>(filter on)<% else %>(filter off)<% end %></span>
    <i id="filter_toggle_refresh" class='fa fa-refresh' style='display:none;font-weight:normal;position:absolute;top:5px;left:304px'></i>
  </label>
</div>
<div>
  [&nbsp;&nbsp;Jump to: <a href="#account-fields">&nbsp;&nbsp;Account&nbsp;&nbsp;</a> | 
  <a href="#stream-fields">&nbsp;&nbsp;Stream&nbsp;&nbsp;</a> | 
  <a href="#contact-fields">&nbsp;&nbsp;Contact&nbsp;&nbsp;</a>] 
</div>

<div class="hr-divider"></div>

<div id="account-fields" class="row col-lg-12" style="margin-right:0; margin-left:0; padding:0px; display: inline"> 
  <table style="min-width:545px; width:100%">
    <tbody>
      <tr>
        <td><h2 style="display:inline">Account</h2></td>
        <td style="margin-right:-1em;padding:0;float:right">
          <a href="#" style="border-bottom:2px solid red;display:none"><i class="fa fa-exclamation"></i> Clear account mapping</a>&nbsp;&nbsp;
          <div style="min-width:18em;width:18em;padding:0px;display:inline-block">
            <button id="salesforce-standard-fields-refresh-accounts-btn" class="btn btn-sm btn-primary btn-outline"> <i class="fa fa-refresh"></i> Refresh ContextSmith Accounts</button>
            <i class="fa fa-question-circle text-primary" data-toggle="tooltip" data-placement="top" data-original-title="Retrieve values from Salesforce fields and load into ContextSmith fields."></i>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<table class="table table-striped table-bordered table-hover responsive no-wrap" id="users-table" cellspacing="0">
    <thead>
        <tr>
            <th style="padding-top:15px;min-width:13em;max-width:20em">ContextSmith Account Field</th>
            <!--<th style="padding-top:15px;min-width:8em;max-width:15em;border-right-style: 1px solid black;">Default value</th>-->
            <th style="padding-top:15px;min-width:13em;max-width:20em">Salesforce Account Field</th>
            <!-- <th style="padding-top:15px;min-width:8em;max-width:15em">Read Permission Role</th>
            <th style="padding-top:15px;min-width:8em;max-width:15em">Update Permission Role</th> -->
        </tr>
    </thead>
    <tbody>
      <% if @cs_account_fields.empty? %>
        <tr>
          <td>No ContextSmith Account fields metadata info!  Please contact your administrator to set these up.</td><td></td><td></td><td></td><td></td><td></td>
        </tr>
      <% else %>
        <% @cs_account_fields.each.with_index do |f,i| %>
          <tr>
            <td><%= f.name %></td>
            <!-- <td class="editable-field"><%= best_in_place f, :default_value, :as => 'input', :place_holder => '(none)', :activator => "#field-#{f.id}-default_value-activator" %><i id="field-<%= f.id %>-default_value-activator" class="fa fa-pencil bip_activator m-l-xs"></td> --> <!-- editable-field-activator -->
            <td> <!-- salesforce_field_name -->
              <%= best_in_place f, :salesforce_field, :as => :select, :collection => @sf_fields[:sf_account_fields], :class => 'btn btn-default btn-sm fa-caret-down salesforce-account-field-name', :style => "color:#DDD;", :f_id => "#{f.id}" %>
              <% if !f.salesforce_field.nil? and @sf_fields[:sf_account_fields_metadata][f.salesforce_field].nil? %>
                <i id="exclamation-triangle-warning-fid<%=f.id%>" style="color:#3d8dc5" class="fa fa-exclamation-triangle text-primary" data-toggle="tooltip" data-placement="right" data-original-title='Invalid Salesforce field mapping detected! Please pick a valid field from the list.'></i>
              <% end %>
            </td>
            <!-- <td>
               <%= best_in_place f, :read_permission_role, :as => :select, :collection => @user_roles, :class => 'btn btn-default btn-sm fa-caret-down', :style => "color:#DDD;", :f_id => "#{f.id}" %>
            </td>
            <td>
               <%= best_in_place f, :update_permission_role, :as => :select, :collection => @user_roles, :class => 'btn btn-default btn-sm fa-caret-down', :style => "color:#DDD;", :f_id => "#{f.id}" %>
            </td> -->
          </tr>
        <% end %>
      <% end %>
    </tbody>
</table>
<div style="margin: -1em 0 1em"><a href="#top">[&nbsp;&nbsp;Back to top&nbsp;&nbsp;]</a></div>

<div class="hr-divider"></div>

<div id="stream-fields" class="row col-lg-12" style="margin-right:0; margin-left:0; padding:0px; display: inline"> 
  <table style="min-width:545px; width:100%">
    <tbody>
      <tr>
      <td><h2 style="display:inline">Stream</h2></td>
      <td style="margin-right:-1.5em;padding:0;float:right">
        <a href="#" style="border-bottom:2px solid red;display:none"><i class="fa fa-exclamation"></i> Clear all stream mapping</a>&nbsp;&nbsp;
        <div style="min-width:18em;width:18em;padding:0px;display:inline-block">
          <button id="salesforce-standard-fields-refresh-projects-btn" class="btn btn-sm btn-primary btn-outline"> <i class="fa fa-refresh"></i> Refresh ContextSmith Streams</button>
          <i class="fa fa-question-circle text-primary" data-toggle="tooltip" data-placement="top" data-original-title="Retrieve values from Salesforce fields and load into ContextSmith fields."></i>
        </div>
      </td>
      </tr>
    </tbody>
  </table>
</div>
<table class="table table-striped table-bordered table-hover responsive no-wrap" id="users-table" cellspacing="0">
    <thead>
        <tr>
            <th style="padding-top:15px;min-width:13em;max-width:20em">ContextSmith Stream Field</th>
            <!--<th style="padding-top:15px;min-width:8em;max-width:15em;border-right-style: 1px solid black;">Default value</th>-->
            <th style="padding-top:15px;min-width:13em;max-width:20em">Salesforce Opportunity Field</th>
            <!-- <th style="padding-top:15px;min-width:8em;max-width:15em">Read Permission Role</th>
            <th style="padding-top:15px;min-width:8em;max-width:15em">Update Permission Role</th> -->
        </tr>
    </thead>
    <tbody>
      <% if @cs_stream_fields.empty? %>
        <tr>
          <td>No ContextSmith Stream fields metadata info!  Please contact your administrator to set these up.</a></td><td></td><td></td><td></td><td></td><td></td>
        </tr>
      <% else %>
        <% @cs_stream_fields.each.with_index do |f,i| %>
          <tr>
            <td><%= f.name %></td>
            <!-- <td class="editable-field"><%= best_in_place f, :default_value, :as => 'input', :place_holder => '(none)', :activator => "#field-#{f.id}-default_value-activator" %><i id="field-<%= f.id %>-default_value-activator" class="fa fa-pencil bip_activator m-l-xs"></td> --> <!-- editable-field-activator -->
            <td> <!-- salesforce_field_name -->
              <%= best_in_place f, :salesforce_field, :as => :select, :collection => @sf_fields[:sf_opportunity_fields], :class => 'btn btn-default btn-sm fa-caret-down salesforce-opportunity-field-name', :style => "color:#DDD;", :f_id => "#{f.id}" %>
              <% if !f.salesforce_field.nil? and @sf_fields[:sf_opportunity_fields_metadata][f.salesforce_field].nil? %>
                <i id="exclamation-triangle-warning-fid<%=f.id%>" style="color:#3d8dc5" class="fa fa-exclamation-triangle text-primary" data-toggle="tooltip" data-placement="right" data-original-title='Invalid Salesforce field mapping detected! Please pick a valid field from the list.'></i>
              <% end %>
            </td>
            <!-- <td>
               <%= best_in_place f, :read_permission_role, :as => :select, :collection => @user_roles, :class => 'btn btn-default btn-sm fa-caret-down', :style => "color:#DDD;", :f_id => "#{f.id}" %>
            </td>
            <td>
               <%= best_in_place f, :update_permission_role, :as => :select, :collection => @user_roles, :class => 'btn btn-default btn-sm fa-caret-down', :style => "color:#DDD;", :f_id => "#{f.id}" %>
            </td> -->
          </tr>
        <% end %>
      <% end %>
    </tbody>
</table>
<div style="margin: -1em 0 1em"><a href="#top">[&nbsp;&nbsp;Back to top&nbsp;&nbsp;]</a></div>

<div class="hr-divider"></div>

<div id="contact-fields" class="row col-lg-12" style="margin-right:0; margin-left:0; padding:0px; display: inline"> 
  <table style="min-width:545px; width:100%">
    <tbody>
      <tr>
      <td><h2 style="display:inline">Contact</h2></td>
      <td style="margin-right:-1.5em;padding:0;float:right">
        <a href="#" style="border-bottom:2px solid red;display:none"><i class="fa fa-exclamation"></i> Clear all contact mapping</a>&nbsp;&nbsp;
        <div style="min-width:18em;width:18em;padding:0px;display:inline-block">
          <button id="salesforce-standard-fields-refresh-contacts-btn" class="btn btn-sm btn-primary btn-outline"> <i class="fa fa-refresh"></i> Refresh ContextSmith Contacts</button>
          <i class="fa fa-question-circle text-primary" data-toggle="tooltip" data-placement="top" data-original-title="Retrieve values from Salesforce fields and load into ContextSmith fields."></i>
        </div>
      </td>
      </tr>
    </tbody>
  </table>
</div>
<table class="table table-striped table-bordered table-hover responsive no-wrap" id="users-table" cellspacing="0">
    <thead>
        <tr>
            <th style="padding-top:15px;min-width:13em;max-width:20em">ContextSmith Contact Field</th>
            <!--<th style="padding-top:15px;min-width:8em;max-width:15em;border-right-style: 1px solid black;">Default value</th>-->
            <th style="padding-top:15px;min-width:13em;max-width:20em">Salesforce Contact Field</th>
            <!-- <th style="padding-top:15px;min-width:8em;max-width:15em">Read Permission Role</th>
            <th style="padding-top:15px;min-width:8em;max-width:15em">Update Permission Role</th> -->
        </tr>
    </thead>
    <tbody>
      <% if @cs_contact_fields.empty? %>
        <tr>
          <td>No ContextSmith Contact fields metadata info!  Please contact your administrator to set these up.</a></td><td></td><td></td><td></td><td></td><td></td>
        </tr>
      <% else %>
        <% @cs_contact_fields.each.with_index do |f,i| %>
          <tr>
            <td><%= f.name %></td>
            <!-- <td class="editable-field"><%= best_in_place f, :default_value, :as => 'input', :place_holder => '(none)', :activator => "#field-#{f.id}-default_value-activator" %><i id="field-<%= f.id %>-default_value-activator" class="fa fa-pencil bip_activator m-l-xs"></td> --> <!-- editable-field-activator --> 
            <td> <!-- salesforce_field_name -->
              <%= best_in_place f, :salesforce_field, :as => :select, :collection => @sf_fields[:sf_contact_fields], :class => 'btn btn-default btn-sm fa-caret-down salesforce-contact-field-name', :style => "color:#DDD;", :f_id => "#{f.id}" %>
              <% if !f.salesforce_field.nil? and @sf_fields[:sf_contact_fields_metadata][f.salesforce_field].nil? %>
                <i id="exclamation-triangle-warning-fid<%=f.id%>" style="color:#3d8dc5" class="fa fa-exclamation-triangle text-primary" data-toggle="tooltip" data-placement="right" data-original-title='Invalid Salesforce field mapping detected! Please pick a valid field from the list.'></i>
              <% end %>
            </td>
            <!-- <td>
               <%= best_in_place f, :read_permission_role, :as => :select, :collection => @user_roles, :class => 'btn btn-default btn-sm fa-caret-down', :style => "color:#DDD;", :f_id => "#{f.id}" %>
            </td>
            <td>
               <%= best_in_place f, :update_permission_role, :as => :select, :collection => @user_roles, :class => 'btn btn-default btn-sm fa-caret-down', :style => "color:#DDD;", :f_id => "#{f.id}" %>
            </td> -->
          </tr>
        <% end %>
      <% end %>
    </tbody>
</table>

<div style="margin: -1em 0 1em"><a href="#top">[&nbsp;&nbsp;Back to top&nbsp;&nbsp;]</a></div>
